/*
 * inpost.cpp
 *
 *  Created on: 27-Dec-2017
 *      Author: e2002
 */

#include "inpost.h"
#include "stack.h"
#include <string>
#include <iostream>
using namespace std;

int inpost ::  isoperator(char x)
{
	if(x=='(' || x=='/' || x=='*' || x=='+' || x=='-' || x=='^')
		return 1;

	else
		return 0;
}

int inpost ::  priority(char x)
{
	if(x=='^')
		return 4;

	else if(x=='/' || x=='*')
		return 3;

	else if(x=='+' || x=='-')
		return 2;

	else if(x=='(')
		return 1;

}

void inpost :: infix_to_postfix(string arr,string ans,stack s)
{
	int len=arr.length(),k=0;

		for(int i=0;i<len;i++)
		{
			char x;

			cin>>x;

			if( (x>='A' && x<='Z') || (x>='a' && x<='z') )
			{
				ans[k++]=arr[i];
			}

			else if(isoperator(x))
			{
				while( priority(s.tope()) >= priority(x) )
				{
					ans[k++]=s.pop();

				}

				s.push(x);
			}

			else if(x==')')
			{
				while(s.tope() != '(')
				{
					ans[k++]=s.pop();
				}

			}

			if(i==len-1 && !s.isempty())
			{
				while(!s.isempty())
					ans[k++]=s.pop();
			}
		}
}

